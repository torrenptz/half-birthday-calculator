<body>
    <!-- Wizard Flow Container -->
    <div id="wizardContainer">
        <p id="wizardText">Welcome brave traveller, I have been waiting for you. No doubt you have come seeking the ancient magical knowledge of one's Celestial Equinox... or should I say half-birthday. Please weary traveller, take a seat and drink some tea.</p>
        <button id="wizardButton" onclick="startJourney()">Take a seat and drink some tea</button>
    </div>

    <script>
        /* Global Variables */
        let userName = "";
        let userZodiac = "";

        /* Conversational Flow Functions */

        // Start the journey
        function startJourney() {
            const wizardContainer = document.getElementById("wizardContainer");
            wizardContainer.innerHTML = `
                <p>Ah very good, now traveller, what is your name?</p>
                <input type="text" id="userNameInput" placeholder="Enter your name">
                <button onclick="setName()">Submit</button>
            `;
        }

        // Capture the user's name
        function setName() {
            const nameInput = document.getElementById("userNameInput").value.trim();
            if (!nameInput) {
                alert("Please enter your name, traveller.");
                return;
            }
            userName = nameInput;
            document.getElementById("wizardContainer").innerHTML = `
                <p>Just as the stars foretold, how lovely to meet you, ${userName}! Now, let's get to business, the esoteric knowledge you seek. You have come this far. Now first, brave ${userName}, you must carve your birthdate into this magical stone.</p>
                <input type="number" id="birthDay" placeholder="Day (DD)" min="1" max="31" required>
                <input type="number" id="birthMonth" placeholder="Month (MM)" min="1" max="12" required>
                <button onclick="setBirthdate()">Carve the stone</button>
            `;
        }

        // Capture the user's birthdate and calculate zodiac
        function setBirthdate() {
            const birthDay = parseInt(document.getElementById("birthDay").value);
            const birthMonth = parseInt(document.getElementById("birthMonth").value);

            if (!birthDay || !birthMonth || birthDay > 31 || birthMonth > 12) {
                alert("Please carve a valid birthdate, traveller.");
                return;
            }

            userZodiac = getZodiacSign(birthDay, birthMonth);

            const zodiacHumor = {
                Aries: "Always so bold, aren’t you? Charging ahead without hesitation!",
                Taurus: "Steady and grounded, I bet you love a good feast.",
                Gemini: "Chatty and curious! Probably asking questions already.",
                Cancer: "Ah, a nurturer. The stars say you’re a great hugger.",
                Leo: "Radiant and dramatic! Let me fetch your spotlight.",
                Virgo: "Meticulous and practical, I see you already organizing this adventure.",
                Libra: "Balanced and charming, I feel more harmonious just being near you.",
                Scorpio: "Mysterious and intense… are you reading my mind right now?",
                Sagittarius: "Adventurous and free-spirited! Let me guess, you’re already planning your next journey.",
                Capricorn: "Disciplined and ambitious! Are you running the cosmos now?",
                Aquarius: "Visionary and unique. I bet you’re already thinking about the future.",
                Pisces: "Dreamy and imaginative! Are you even listening, or are you off in a daydream?"
            };

            document.getElementById("wizardContainer").innerHTML = `
                <p>Ah yes! You are a ${userZodiac}! Of course, that explains the following: "${zodiacHumor[userZodiac]}"</p>
                <p>Now, are you ready to cast these stones into the Cavern of Cosmic Wonders?</p>
                <button onclick="castStones()">Yes, tell me my half-birthday!</button>
            `;
        }

        // Simulate casting stones and reveal results
        function castStones() {
            const celestialMessages = [
                "Reconfiguring the star charts...",
                "Consulting with the celestial oracle...",
                "Illuminating astral pathways...",
                "Charting the zodiac wheel...",
                "Whispering to ancient constellations...",
                "Synchronizing planetary alignments...",
                "Cross-referencing cosmic archives...",
                "Balancing universal energies..."
            ];

            let index = 0;
            document.getElementById("wizardContainer").innerHTML = `<p id="loadingMessage">${celestialMessages[index]}</p>`;
            const interval = setInterval(() => {
                index = Math.floor(Math.random() * celestialMessages.length);
                document.getElementById("loadingMessage").textContent = celestialMessages[index];
            }, 1000);

            setTimeout(() => {
                clearInterval(interval);
                showHalfBirthdayResults();
            }, 5000);
        }

        // Show half-birthday results
        function showHalfBirthdayResults() {
            const birthDay = parseInt(document.getElementById("birthDay").value);
            const birthMonth = parseInt(document.getElementById("birthMonth").value);
            const halfBirthday = new Date(2024, birthMonth - 1, birthDay);
            halfBirthday.setDate(halfBirthday.getDate() + 182);

            const monthNames = [
                "January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];
            const halfMonth = monthNames[halfBirthday.getMonth()];
            const halfDay = halfBirthday.getDate();

            const halfZodiac = getZodiacSign(halfBirthday.getDate(), halfBirthday.getMonth() + 1);
            const zodiacKey = `${userZodiac}-${halfZodiac}`;

            const halfBirthdayMessage = zodiacMessages[zodiacKey] || "No specific message for this pairing.";

            document.getElementById("wizardContainer").innerHTML = `
                <p>Very well, ${userName}. The stars have spoken!</p>
                <p>Your half-birthday is: <strong>${halfMonth} ${halfDay}</strong></p>
                <p>${halfBirthdayMessage}</p>
                <p>${halfBirthdayReflection}</p>
            `;
        }

        /* Helper Functions */

        // Determine zodiac sign
        function getZodiacSign(day, month) {
            for (let sign of zodiacSigns) {
                if (
                    (month === sign.start[0] && day >= sign.start[1]) ||
                    (month === sign.end[0] && day <= sign.end[1])
                ) {
                    return sign.sign;
                }
            }
            return "Capricorn"; // Default fallback
        }

        /* Zodiac Data Section */
        const zodiacSigns = [
            { sign: "Capricorn", start: [12, 22], end: [1, 19] },
            { sign: "Aquarius", start: [1, 20], end: [2, 18] },
            { sign: "Pisces", start: [2, 19], end: [3, 20] },
            { sign: "Aries", start: [3, 21], end: [4, 19] },
            { sign: "Taurus", start: [4, 20], end: [5, 20] },
            { sign: "Gemini", start: [5, 21], end: [6, 20] },
            { sign: "Cancer", start: [6, 21], end: [7, 22] },
            { sign: "Leo", start: [7, 23], end: [8, 22] },
            { sign: "Virgo", start: [8, 23], end: [9, 22] },
            { sign: "Libra", start: [9, 23], end: [10, 22] },
            { sign: "Scorpio", start: [10, 23], end: [11, 21] },
            { sign: "Sagittarius", start: [11, 22], end: [12, 21] }
        ];

        const zodiacMessages = {
            "Aries-Libra": "Message for Aries-Libra...",
            // Add the other messages here
        };

        const halfBirthdayReflection = 
            "A half-birthday is more than just a date halfway through the year—it’s a time for introspection and balance. Unlike your actual birthday, which celebrates you, your half-birthday is a moment to pause and appreciate the people, opportunities, and growth in your life. It’s an invitation to reflect on how far you’ve come and to consider what you can give back to the world.";
    </script>
</body>
